<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module Sidekiq::Worker::ClassMethods - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-delay">#delay</a>
    
    <li ><a href="#method-i-delay_for">#delay_for</a>
    
    <li ><a href="#method-i-delay_until">#delay_until</a>
    
    <li ><a href="#method-i-perform_async">#perform_async</a>
    
    <li ><a href="#method-i-perform_at">#perform_at</a>
    
    <li ><a href="#method-i-perform_bulk">#perform_bulk</a>
    
    <li ><a href="#method-i-perform_in">#perform_in</a>
    
    <li ><a href="#method-i-perform_inline">#perform_inline</a>
    
    <li ><a href="#method-i-perform_sync">#perform_sync</a>
    
    <li ><a href="#method-i-queue_as">#queue_as</a>
    
    <li ><a href="#method-i-set">#set</a>
    
    <li class="calls-super" ><a href="#method-i-sidekiq_options">#sidekiq_options</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-Sidekiq::Worker::ClassMethods">
  <h1 id="module-Sidekiq::Worker::ClassMethods" class="module">
    module Sidekiq::Worker::ClassMethods
  </h1>

  <section class="description">
    
  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-delay" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delay</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="delay-source">
            <pre><span class="ruby-comment"># File lib/sidekiq/worker.rb, line 267</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">delay</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Do not call .delay on a Sidekiq::Worker class, call .perform_async&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delay_for" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delay_for</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="delay_for-source">
            <pre><span class="ruby-comment"># File lib/sidekiq/worker.rb, line 271</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">delay_for</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Do not call .delay_for on a Sidekiq::Worker class, call .perform_in&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delay_until" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delay_until</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="delay_until-source">
            <pre><span class="ruby-comment"># File lib/sidekiq/worker.rb, line 275</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">delay_until</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Do not call .delay_until on a Sidekiq::Worker class, call .perform_at&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-perform_async" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">perform_async</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="perform_async-source">
            <pre><span class="ruby-comment"># File lib/sidekiq/worker.rb, line 287</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">perform_async</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-constant">Setter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, {}).<span class="ruby-identifier">perform_async</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-perform_at" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">perform_at</span><span
            class="method-args">(interval, *args)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="ClassMethods.html#method-i-perform_in">perform_in</a>
        </div>
        
      </div>

    
      <div id="method-i-perform_bulk" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">perform_bulk</span><span
            class="method-args">(*args, **kwargs)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Push a large number of jobs to Redis, while limiting the batch of each job
payload to 1,000. This method helps cut down on the number of round trips
to Redis, which can increase the performance of enqueueing large numbers of
jobs.</p>

<p><code>items</code> must be an Array of Arrays.</p>

<p>For finer-grained control, use `Sidekiq::Client.push_bulk` directly.</p>

<p>Example (3 Redis round trips):</p>

<pre class="ruby"><span class="ruby-constant">SomeWorker</span>.<span class="ruby-identifier">perform_async</span>(<span class="ruby-value">1</span>)
<span class="ruby-constant">SomeWorker</span>.<span class="ruby-identifier">perform_async</span>(<span class="ruby-value">2</span>)
<span class="ruby-constant">SomeWorker</span>.<span class="ruby-identifier">perform_async</span>(<span class="ruby-value">3</span>)
</pre>

<p>Would instead become (1 Redis round trip):</p>

<pre class="ruby"><span class="ruby-constant">SomeWorker</span>.<span class="ruby-identifier">perform_bulk</span>([[<span class="ruby-value">1</span>], [<span class="ruby-value">2</span>], [<span class="ruby-value">3</span>]])
</pre>
          
          

          
          <div class="method-source-code" id="perform_bulk-source">
            <pre><span class="ruby-comment"># File lib/sidekiq/worker.rb, line 317</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">perform_bulk</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">kwargs</span>)
  <span class="ruby-constant">Setter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, {}).<span class="ruby-identifier">perform_bulk</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">kwargs</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-perform_in" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">perform_in</span><span
            class="method-args">(interval, *args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><code>interval</code> must be a timestamp, numeric or something that acts</p>

<pre>numeric (like an activesupport time interval).</pre>
          
          

          
          <div class="method-source-code" id="perform_in-source">
            <pre><span class="ruby-comment"># File lib/sidekiq/worker.rb, line 323</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">perform_in</span>(<span class="ruby-identifier">interval</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">int</span> = <span class="ruby-identifier">interval</span>.<span class="ruby-identifier">to_f</span>
  <span class="ruby-identifier">now</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_f</span>
  <span class="ruby-identifier">ts</span> = (<span class="ruby-identifier">int</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1_000_000_000</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">now</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">int</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">int</span>)

  <span class="ruby-identifier">item</span> = {<span class="ruby-string">&quot;class&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">self</span>, <span class="ruby-string">&quot;args&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">args</span>}

  <span class="ruby-comment"># Optimization to enqueue something now that is scheduled to go out now or in the past</span>
  <span class="ruby-identifier">item</span>[<span class="ruby-string">&quot;at&quot;</span>] = <span class="ruby-identifier">ts</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">ts</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">now</span>

  <span class="ruby-identifier">client_push</span>(<span class="ruby-identifier">item</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="ClassMethods.html#method-i-perform_at">perform_at</a>
        </div>
        

        
      </div>

    
      <div id="method-i-perform_inline" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">perform_inline</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Inline execution of job&#39;s perform method after passing through
Sidekiq.client_middleware and Sidekiq.server_middleware</p>
          
          

          
          <div class="method-source-code" id="perform_inline-source">
            <pre><span class="ruby-comment"># File lib/sidekiq/worker.rb, line 292</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">perform_inline</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-constant">Setter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, {}).<span class="ruby-identifier">perform_inline</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="ClassMethods.html#method-i-perform_sync">perform_sync</a>
        </div>
        

        
      </div>

    
      <div id="method-i-perform_sync" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">perform_sync</span><span
            class="method-args">(*args)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="ClassMethods.html#method-i-perform_inline">perform_inline</a>
        </div>
        
      </div>

    
      <div id="method-i-queue_as" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">queue_as</span><span
            class="method-args">(q)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="queue_as-source">
            <pre><span class="ruby-comment"># File lib/sidekiq/worker.rb, line 279</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">queue_as</span>(<span class="ruby-identifier">q</span>)
  <span class="ruby-identifier">sidekiq_options</span>(<span class="ruby-string">&quot;queue&quot;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">q</span>.<span class="ruby-identifier">to_s</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-set" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set</span><span
            class="method-args">(options)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="set-source">
            <pre><span class="ruby-comment"># File lib/sidekiq/worker.rb, line 283</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">set</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-constant">Setter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sidekiq_options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sidekiq_options</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Allows customization for this type of <a href="../Worker.html">Worker</a>.
Legal options:</p>

<pre>queue - use a named queue for this Worker, default &#39;default&#39;
retry - enable the RetryJobs middleware for this Worker, *true* to use the default
   or *Integer* count
backtrace - whether to save any error backtrace in the retry payload to display in web UI,
   can be true, false or an integer number of lines to save, default *false*
pool - use the given Redis connection pool to push this type of job to a given shard.</pre>

<p>In practice, any option is allowed.  This is the main mechanism to
configure the options for a specific job.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="sidekiq_options-source">
            <pre><span class="ruby-comment"># File lib/sidekiq/worker.rb, line 350</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">sidekiq_options</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.0.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

