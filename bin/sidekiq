#!/usr/bin/env ruby

begin
  require 'sidekiq/cli'
rescue LoadError
  # Better way to do this in dev?
  $LOAD_PATH << File.expand_path(File.dirname(__FILE__) + '/../lib') if File.exist?("../lib/sidekiq.rb")
  require 'sidekiq/cli'
end

begin
  cli = Sidekiq::CLI.new
  cli.run
rescue => e
  raise e if $DEBUG
  STDERR.puts e.message
  exit 1
end
